Raphael.fn.tachometer=function(e,d){function b(){this.initialize.apply(this,arguments)}var a=b.prototype;a.initialize=function(j,o,i){var p=j.canvas.clientWidth||j.width,m=j.canvas.cliendHeight||j.height,l=Math.floor(p/2),k=Math.floor(m/2),q=Math.min(p,m),n=q-i.frameSize*2,g=Math.floor(q/2);this.drawBoard(j,l,k,q,g,i.frameSize);this.drawScale(j,l,k,n,i);if(i.number){this.drawNumber(j,l,k,n,i)}this.drawNeedle(j,l,k,n,o,i)};a.drawBoard=function(l,g,k,h,i,j){l.circle(g,k,i).attr(d.outerFrameAttr);l.circle(g,k,i-j).attr(d.innerFrameAttr);l.circle(g,k,i-j*2).attr(d.boardAttr)};a.drawScale=function(n,q,o,p,g){var s=g.scaleWidth,l=g.scaleLength,i=g.boardMargin,r=Math.ceil(s/2),k=Math.ceil(l/2);var t=this.scale(n,q,o,r,k,p,i,g.scaleAngleStart);this.cloneScale(t,q,o,g.shortScaleCount,g);var j=this.scale(n,q,o,s,l,p,i,g.scaleAngleStart);this.cloneScale(j,q,o,g.longScaleCount,g)};a.scale=function(k,q,n,s,j,o,i,g){var p=q-Math.floor(s/2),l=o-j-i;return k.rect(p,l,s,j).attr(d.scaleAttr).rotate(g,q,n)};a.cloneScale=function(l,h,n,m,k){var g=(k.scaleAngleEnd-k.scaleAngleStart)/m;for(var j=1;j<=m;j++){l.clone().rotate(g*j,h,n)}};a.drawNumber=function(p,v,s,t,h){var g=h.longScaleCount,q=(h.scaleAngleEnd-h.scaleAngleStart)/g,j=(h.numberMax-h.numberMin)/g,k=h.numberMargin,r=t/2-k,w=h.scaleAngleStart,u=null,n=null,l=null;for(var o=0;o<=g;o++){u=Math.round(j*o)+h.numberMin;if(o==0){u=u+h.numberUnit}n=v+Math.floor(r*Math.cos(Raphael.rad(q*o+90+w)));l=s+Math.floor(r*Math.sin(Raphael.rad(q*o+90+w)));p.text(n,l,u).attr(h.numberAttr).toFront()}};a.drawNeedle=function(w,p,o,h,C,i){var q=Math.floor(i.needlePivotWidth/2),t=i.needleMargin,j={start:p+q,middle:p,end:p-q},n={start:o,end:h-t},s="M"+j.start+" "+n.start+" L"+j.middle+" "+n.end+" L"+j.end+" "+n.start+" L"+j.start+" "+n.start,v=w.path(s).attr(i.needleAttr),g=w.circle(p,o,t).attr(i.outerNeedlePivotAttr),z=w.circle(p,o,t/2).attr(i.innerNeedlePivotAttr),r=w.set(),u=i.scaleAngleStart,B=i.scaleAngleEnd,A=i.numberMin,l=i.numberMax,k=(B-u)*((C-A)/(l-A))+u;v.rotate(u,p,o);r.push(v,g,z).attr(i.needleSetAttr);if(i.needleAnimation){r.animate({transform:"r"+k+" "+p+" "+o},700,"bounce")}else{r.rotate(k,p,o)}};function f(g,i){for(var h in i){if(i.hasOwnProperty(h)){g[h]=i[h]===Object(i[h])?f(g[h],i[h]):i[h]}}return g}d=f({boardMargin:6,boardAttr:{stroke:0,fill:"r#333:85-#000"},frameSize:6,outerFrameAttr:{stroke:"#b3b3b3","stroke-width":0.3,fill:"45-#ccc-#fff:50-#ccc"},innerFrameAttr:{stroke:"#ccc","stroke-width":0.3,fill:"45-#666-#fff:50-#666"},needleMargin:6,needlePivotWidth:6,needleAttr:{fill:"#f00","stroke-width":0},outerNeedlePivotAttr:{fill:"#f00","stroke-width":0},innerNeedlePivotAttr:{fill:"#fff","stroke-width":0},needleSetAttr:{"stroke-width":0.3,stroke:"#fff"},needleAnimation:true,needleAnimationDuration:700,needleAnimationEasing:"bounce",number:true,numberMargin:34,numberAttr:{fill:"#fff","font-family":'"Palatino Linotype", "Book Antiqua", Palatino, serif',"font-size":10},numberMin:0,numberMax:100,numberUnit:"%",scaleLength:10,scaleWidth:3,scaleAttr:{fill:"#fff"},scaleAngleStart:0,scaleAngleEnd:270,longScaleCount:10,shortScaleCount:50,interactive:false},d);var c=new b(this,e,d);return d.interactive?c:this};